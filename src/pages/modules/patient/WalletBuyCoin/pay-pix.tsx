import React, { useState, useRef } from 'react'
import moment from 'moment'

import ButtonPrimary from '@/components/Button/Primary'

import { ReactComponent as CopyIcon } from '@/assets/icons/copy.svg'
import { MessageContainer, PixInfo } from './styles'

export const WalletBuyCoinPayPix: React.FC = () => {
  const validUntil = moment().add(4, 'hours').format()
  const pixQrCodeBase64 =
    'data:image/png;base64,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'
  const pixStringCode =
    'AJUSABNHSU87H0SDN798A987YT978ZYT987BDNT97TD9876TD9NBZX7WTEZN98W7TDEBZN9W7TDBZ87WBNTZ987WTF987Z6TBFN987TWBZ9N7FWB9Z8FB9WZB7WTF9Z87WFB98WFZBN98W7FTBN0'
  const [isCopied, setIsCopied] = useState(false)
  const timer = useRef<NodeJS.Timeout>()

  async function handleCopyClick() {
    await navigator.clipboard.writeText(pixStringCode)
    setIsCopied(true)

    if (timer.current) {
      clearTimeout(timer.current)
    }

    timer.current = setTimeout(() => {
      setIsCopied(false)
    }, 5000)
  }

  return (
    <MessageContainer>
      <header>
        <h3>PIX</h3>
        <p>
          O seu QR Code é válido até{' '}
          {moment(validUntil).format('DD/MM/YYYY[,] HH[h]m')}.
          <br />A confirmação do pagamento será realizada em até 20 minutos.
        </p>
      </header>

      <PixInfo>
        <div>
          <img src={pixQrCodeBase64} />
        </div>

        <p>{pixStringCode}</p>

        <ButtonPrimary onClick={handleCopyClick}>
          {isCopied ? (
            <>Copiado!</>
          ) : (
            <>
              Copie e Cole
              <CopyIcon />
            </>
          )}
        </ButtonPrimary>
      </PixInfo>
    </MessageContainer>
  )
}
